import java.lang.reflect.Field;
import org.springframework.util.ReflectionUtils;

private void updateBien(Bien existingBien, Bien updatedBien) {
    merge(existingBien, updatedBien);
}

private void merge(Object existingObject, Object patchObject) {
    if (patchObject == null) {
        return;
    }

    Class<?> clazz = existingObject.getClass();
    Field[] fields = clazz.getDeclaredFields();

    for (Field field : fields) {
        field.setAccessible(true);
        try {
            Object patchValue = field.get(patchObject);
            Object existingValue = field.get(existingObject);

            if (patchValue != null) {
                field.set(existingObject, patchValue);
            } else if (patchValue == null && !field.getType().isPrimitive()) {
                // If the field is explicitly set to null, it should be set to null
                continue;
            }
            // Fields that are not included in the patch will retain their existing values
        } catch (IllegalAccessException e) {
            // Handle error
            commonLogger.eventTyp(EventTyp.APPLICATIVE).secEventTyp(SecEventTyp.METIER)
                        .logger().info("Erreur lors de l'update du financement dans le bien caus√© par: {}", e.getMessage());
        }
    }
}
