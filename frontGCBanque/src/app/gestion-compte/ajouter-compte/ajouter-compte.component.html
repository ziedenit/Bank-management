<!-- ------------------------------Titre principal OFD ------------------------------------------------------------------------>
<h2 class ="Titre-01"> Acquisition des données et des justificatifs</h2>

<!---------------------------------------bloc clients Particuliers---------------------------------------------------------->
<div  *ngIf="clientParticulier==true" >
  <div class="container">
    <div  class="nav" >
      <img  *ngIf="hiddenClient==false" src="../../../assets/icons/arrow-up.svg"  (click)="hideDataClient()" /> 
       <img *ngIf="hiddenClient==true" src="../../../assets/icons/arrow-down.svg"   (click)="showDataClient()"/>  &nbsp;
      Client ({{idRepers.length }}) 
     </div>
    <ul class="list-group" *ngIf="elementClient == true">
      <li 
        class="list-group-item" 
        *ngFor="let client of clientDataList"
      >
      <div class="row">
        <div class="col">
     {{client.usual_last_name }} {{client.first_name}}
        </div>
        <div class="col"> 
         né (e) le  {{client.birth_date}} 
        </div>
      </div>    
    </li>  
    </ul>
    <div >
      <!-- Affichage du message d'erreur -->
      <div *ngIf="errorrs.length>0">
      <div  class="error-message">
       <ul class="list-group" *ngIf="elementClient == true">
         <li class="list-group-item" *ngFor="let error of errorrs">
           <div class="row">
             <div class="col">
               {{ error.messageErrorP }}
             </div>
             <div class="col">
              idReper du Client: {{ error.idReperErrorP }}
             </div>
           </div>
         </li>
       </ul>
     </div>
   </div>
   </div>
   </div>
  </div>

<!---------------------------------------bloc clients Entreprise---------------------------------------------------------->
<div *ngIf="clientParticulier==false">
<div class="container">
  
  <div  class="nav" >
    <img  *ngIf="hiddenClient==false" src="../../../assets/icons/arrow-up.svg"  (click)="hideDataClient()" /> 
     <img *ngIf="hiddenClient==true" src="../../../assets/icons/arrow-down.svg"   (click)="showDataClient()"/>  &nbsp;
    Client ({{ idRepers.length }}) 
   </div>
  <ul class="list-group" *ngIf="elementClient == true">
    <li 
      class="list-group-item"
      *ngFor="let client of entrepriseData"

    >
    <div class="row">
      <div class="col">
       
        {{client.legal_name}}
      </div>
      <div class="col">
       Siren: {{client.siren}} 
      </div>
    </div>
  </li>  
  </ul>
  <div >
   <!-- Affichage du message d'erreur -->
   <div *ngIf="errors.length>0">
   <div  class="error-message">
    <ul class="list-group" *ngIf="elementClient == true">
      <li class="list-group-item" *ngFor="let error of errors">
        <div class="row">
          <div class="col">
            {{ error.messageErrorE}}
          </div>
          <div class="col">
           idReper: {{ error.idReperErrorE }}
          </div>
        </div>
      </li>
    </ul>
  </div>                                  
</div>
</div>
</div>
</div>

<!-----------------------------------------------------bloc Biens-------------------------------------------------------------------->
<div class="container">
  <div class="nav" >
    <img  *ngIf="hiddenBien==false " src="../../../assets/icons/arrow-up.svg" alt="image flèche haut"  (click)="hideDataBien()" />
    <img *ngIf="hiddenBien==true" src="../../../assets/icons/arrow-down.svg" alt="image flèche haut"  (click)="showDataBien()"/>  &nbsp;
    Liste des biens ({{ biens.length }})
    </div>

  <ul class="list-group" *ngIf="elementBien == true ">
    <li
      class="list-group-item"
      *ngFor="let bien of biens;let i = index"
    >
    <div class="row"  >
     
      <div class="col">
      <input type="checkbox"  (change)="setCheckedBien(bien,i,$event)">  
      <p>&nbsp;{{ bien.typeBatiment }}</p>  
      </div>
      <div class="col">
      {{ bien.adresseComplete }}
        </div>
    </div>
  </li>  
  </ul>
</div>
<!----------------------------------------bloc formulaire Objet de Financement -------------------------------------------------------------->
  <div class="container"> 
  <div class= "FORMULAIRE">

   <div>
    <div class="blockSize">
    <img  *ngIf="hiddenObjetfinancement==false" src="../../../assets/icons/arrow-up.svg" alt="image flèche haut"  (click)="hideDataObjetFinancement()" /> 
      &nbsp; <img *ngIf="hiddenObjetfinancement==true" src="../../../assets/icons/arrow-down.svg"  alt="image flèche haut"  (click)="showDataObjetFinancement()"/>  
    <h3 class="titreObjetFinancement"> Objet de financement</h3> 
    </div>
  
<div *ngIf="elementObjetfinancement == true">
<div >
  <div class="col">
    <div class="col1"> 

   <!-------------------- champs famille non envoyé dans le context ----------------------->
   <div *ngIf="presenceFamilleObjet==false && presenceObjet==false"    class="form-group">
     <div class="famille_objet_">
    <label for="familleObjet" class="labelFormulaire">Famille objet de financement </label>
      <select [(ngModel)]="selectedFamilleObjet" class="form-list" id="selectedFamilleObjet" name="selectedFamilleObjet">
        <option value='option0' selected> </option>
        <option value='option1'>Immobilier </option>
        <option value='option2'>Installation, maintenance et réparation d'équipement/technologie liés aux bâtiments</option>
        <option value='option3'>Énergies renouvelables </option>
        <option value='option4'>Transport </option>
        <option value='option5'>Autres </option>
      </select>
      &nbsp;<span class="required">*</span>
    </div>
  </div>

<!-------------------- champs famille envoyé et pas l'objet de financement----------------------->
 <div *ngIf="presenceFamilleObjet==true && presenceObjet==false" class="obCont">
  <label class="labelFormulaire" for="familleContext">Famille objet de financement</label>
  <input matInput  class="objetFinance" id="familleObjet" [(ngModel)]="familleObjet" name="ObjectFinance"/> 
</div>


<!-------------------- champs objet financé non envoyé dans le context ----------------------->
<div class ="objetContext" >
  <div class="objetNonContexte">
    <div *ngIf="presenceObjet==false"    class="form-group">
      <label for="objetFinancementType" class="labelFormulaire">Objet du financement </label>
        <select [(ngModel)]="selectedObjetFinancement" class="form-list" id="selectedObjetFinancement" name="selectedObjetFinancement">
          <option value='option0' selected> </option>
          <option value='option1' *ngIf="selectedFamilleObjet=='option1' || familleObjet=='immobilier' ">Construction de bâtiment </option>
          <option value='option2' *ngIf="selectedFamilleObjet=='option1' || familleObjet=='immobilier'">Acquisition de bâtiment </option>
          <option value='option3' *ngIf="selectedFamilleObjet=='option1' ||familleObjet=='immobilier'">Rénovation de bâtiment</option>
          <option value='option4'*ngIf="selectedFamilleObjet=='option1' ||familleObjet=='immobilier'">Acquisition de bâtiment + Rénovation de bâtiment</option>
          <option value='option5'*ngIf="selectedFamilleObjet=='option1' || familleObjet=='immobilier' || selectedFamilleObjet=='option2' ">Equipements favorisant l'efficacité énergétique et performance énergétique du bâtiment</option>
          <option value='option6'*ngIf="selectedFamilleObjet=='option1' || selectedFamilleObjet=='option2' || selectedFamilleObjet=='option4' || familleObjet=='immobilier'">Stations de recharge pour véhicules électriques</option>
          <option value='option7'*ngIf="selectedFamilleObjet=='option3' || selectedFamilleObjet=='option2'">Technologies liées aux énergies renouvelables</option>  
        </select>
        &nbsp;<span class="required">*</span>
      </div>
  </div>
  </div>

<!-------------------- champs objet financé envoyé dans le contexte ----------------------->
    <div class="Objet_Form" *ngIf="presenceObjet==true" >
    <label class="labelFormulaire" for="ObjectFinance">Object financé</label>
    <input matInput  class="objetFinance" id="ObjectFinance" [(ngModel)]="objetFinance"  name="ObjectFinance"/> 
   </div>

<!------------------ champs éligibilité du bien ---------------- -->
    <div class="form-group" >
      <label class="labelFormulaire" for="typeDeBien">Type de bâtiment </label>
      &nbsp;<span class="required">*</span>
      <select class="form-list"   (mouseover)="showDescription($event.target.value)" style="height:30px" id="typeDeBien" name="typeDeBien" [(ngModel)]="selectedType" (change)="onTypeChange()"  >
        <option value='option1'  > Bien soumis au DPE  </option>
        <option value='option2' > Construction provisoire (durée d'utilisation ≤ 2 ans)  </option>
         <option value='option3' > Bâtiment indépendant avec superficie <50 m² </option>
        <option value='option4' > Usage agricole, artisanal ou industriel</option>
        <option value='option5' >Lieux de culte </option>
        <option value='option6' >Monument historique classé </option>
        <option value='option7' >Bâtiment non chauffé  </option>
        <option value='option8' >Utilisation < 4 mois/an </option>
        <option value='option9' > Bâtiment situé dans les DOM-TOM</option>
        <option value='option10' > Bâtiment situé à l'étranger </option> 
      </select>   
    </div> 
      
    <!-------------- champs catégorie du batiment  -------------------------->
    <div class="form-group"  *ngIf="hideFieldForm==false"  >
      <label for="categorieBatiment" class="labelFormulaire"> Nature du bien </label>
      <select  [(ngModel)]="codeBatimentSelected"  (ngModelChange)="patchFinancementCodeBatiment()" class="form-list" style="height:30px" id="categorieBatiment" name="categorieBatiment"  [disabled]="isFieldsDisabled"  >
        <option value='option0' selected > </option>
        <option value='option1' selected > Résidentiel</option>
        <option value='option2'  >Bureaux</option>
        <option value='option3'>Bureaux IGH (hauteur >28 m)</option>
        <option value='option4'>Hôtels</option>
        <option value='option5'>Santé (centres hospitaliers, EHPAD, Etabl. Médicaux sociaux…)</option> 
        <option value='option6'>Centres commerciaux</option>
      </select>
      &nbsp;<span class="required">*</span>
    </div> 
    
     <!-------------- champs nature du bien -------------------------------->
    <div class="form-group"  *ngIf="hideFieldForm==false" [ngClass]="{ 'disabled': isFieldsDisabled }" >
    <label for="categorieBatiment" class="labelFormulaire">Etat du bien  </label>
      <select [(ngModel)]="selectedNatBatiment" (ngModelChange)="patchFinancementEtatBien()" class="form-list" id="natureBien" name="natureBien" [disabled]="isFieldsDisabled" >
        <option value='option0' selected> </option>
        <option value='option1'> Ancien</option>
        <option value='option2'>Neuf</option>
        <option value='option3' [selected]="selectedNatBatimentGestion"> {{selectedNatBatimentGestion}} </option>
      </select>
      <img  *ngIf="natureBienObligatoire==true" src="../../../assets/icons/obligatoire.svg" style="width:15px; height: 15px;" alt="image flèche haut" >
      &nbsp;<span class="required">*</span>
    </div>

    <div class="champsVide" *ngIf="presenceObjet==true">
      <label for="addressBien" ></label>
    </div>


    <!--------------------- adresse complète ------------------------------->
    <div class="form-group" *ngIf="presenceadresse && hideFieldForm==false"  [ngClass]="{ 'disabled': isFieldsDisabled }">
      <label for="addressBien" class="labelFormulaire">Adresse du bien</label>
      <input type="text" class="adresseBienInput"  placeholder="Adresse du bien" id="addressBien" [(ngModel)]="addresseBien"  (ngModelChange)="onFieldChange()" name="description" [disabled]="isFieldsDisabled" />
    <div class="form-group">
      <div  class="addComplete">
        <ul >
          <li *ngFor="let result of addressResult">
            <button (click)="selectAddres(result)">
              {{ result.properties.label }}
            </button>
          </li>
        </ul>
      </div>
    </div>
    </div>


    <div  class ="form-group" *ngIf="hideFieldForm==false" [ngClass]="{ 'disabled': isFieldsDisabled }">
      <label class="labelFormulaire" for="dpe">Siren du diagnostiqueur</label>
      <span class="required"> *</span>
      <input type="text" class="adresseBienInput" placeholder="Ex: 123456789" [(ngModel)]="SirenDPE" (ngModelChange)="patchFinancementSirenDiagnostiqeur()" [disabled]="isFieldsDisabled" /> 
      <!-- <img src="../../../assets/images/help.png" style=" margin-top:-70px; margin-left: 450px ;width:20px; height: 22px;" > -->
    </div>
    <div class="erreurDpe"  fxLayoutAlign="left center" >
      {{message}}
    </div> 
  </div>

 <!-----------------------------------------------------colonne 2 de formulaire ----------------------------------------------->
  <div class="col2">   

    <div class="alertArea" *ngIf="showFirstEligiblite==true">{{messageAlert}}
      <img src="../../../assets/icons/alert.svg" class="imageErreur"  alt="image flèche haut" >
    </div>

   
    <div class="form-group" *ngIf="hideFieldForm==false" >
      <label for="dateDepot" class="labelFormulaire"> Date de dépôt de PC</label>
      <span class="required" *ngIf="selectedNatBatiment=='option2'"> *</span>
      <input class="date" type="date" id="dateDepot" [(ngModel)]="dateDepot" placeholder="yyyy/MM/dd" [disabled]="isFieldsDisabled" />
    </div>
  

        <div  class="form-group"  [ngClass]="{ 'disabled': isFieldsDisabled }">
          <label for="prixAquisitionBien" class="labelFormulaire" >Prix du bien <em> (en euro)</em> </label>
          
          <span class="required"> *</span>
          <input type="text" [(ngModel)]="prixAquisitionBien" (ngModelChange)="patchFinancementPrixBien()" class="champsForm"  id=prixAquisitionBien  name="description" [disabled]="isFieldsDisabled" />
          
        </div>

        <div   class="form-group"    [ngClass]="{ 'disabled': isFieldsDisabled }">
          <label for="montantFinance" class="labelFormulaire">Montant financé <br> <em>(en euro)</em></label>
          <span class="required"> *</span>
          <input type="text" [(ngModel)]="montantLclFinance" (ngModelChange)="patchFinancementMontantFinance()" class="champsForm"  id=montantLclFinance  name="description" [disabled]="isFieldsDisabled" />
        </div>
    

        <div  class="form-group"  [ngClass]="{ 'disabled': isFieldsDisabled }">
          <div class="partLCL">
          <label for="partLcl" class="labelFormulaire">Part LCL <em> (en euro)</em></label>
          <span class="required"> *</span>
          <input type="text" [(ngModel)]="partLcl" class="champsForm" (ngModelChange)="patchFinancementPartLcl()"  id=partLcl  name="description" [disabled]="isFieldsDisabled" />
        </div> 
        </div>


        <div class="form-group" *ngIf="hideFieldForm==false"  [ngClass]="{ 'disabled': isFieldsDisabled }" >
          <label for="NormeThermique" class="labelFormulaire" >Norme Thermique </label>
          <select class="form-list" style="height:30px"id="NormeThermique" required [(ngModel)]="normeThermique" (ngModelChange)="patchFinancementNormeThermique()" name="NormeThermique" [disabled]="isFieldsDisabled">
            <option value='option0' selected> </option>
            <option value='option1'> RT2012  </option>
            <option value='option2'> RE2020 </option>
            <option value='option3' >Autre</option>
          </select>
        </div>  

<!--//////////////////////////////////////////////////////////////////////////////////-->
        <div class="PartVide" *ngIf="prixNonContext==false">
          <br> 
        </div>
        <div class="PartVide" *ngIf="montantContext==false">
          <br> 
        </div>
        <div class="PartVide" *ngIf="partLclContext==false">
          <br> 
        </div>
<!--//////////////////////////////////////////////////////////////////////////////////-->

    <div *ngIf="presenceadresse && hideFieldForm==false" [disabled]="isFieldsDisabled" class="adresseCodeVille">
    <input matInput id="codePostal"   [(ngModel)]="addresseBienCodePostal" (ngModelChange)="onFieldChange()" placeholder="Code postal"  name="codePostal" class="form-groupCodePostal" [ngClass]="{ 'disabled': isFieldsDisabled }">
    <span class="required">*</span>
    <input matInput id="ville"   [(ngModel)]="addresseBienVille"  (ngModelChange)="onFieldChange()" placeholder="Ville"  name="ville" class="form-groupNomVille" [ngClass]="{ 'disabled': isFieldsDisabled }">
    <span class="required">*</span>
    </div>
  
    
    <div  *ngIf="hideFieldForm==false" class="rechercherDPE">
      <div  class ="flex" [ngClass]="{ 'disabled': isFieldsDisabled }">
        <label class="labelFormulaire" for="dpe">N° du DPE</label>
        <input type="text" class="update" placeholder="Ex: 2100E0981916Z" [(ngModel)]="numeroDpeAdeme" (ngModelChange)="patchFinancementNumeroDpe()" [disabled]="isFieldsDisabled" />
        <img *ngIf="dpechsecked" src="../../../assets/icons/coche.png" style="width:15px; height: 15px;"  alt="image flèche haut">
        <img  src="../../../assets/images/search.png"  (click)="showAdemeResult(numeroDpeAdeme)" style=" margin-left: 20px; width:20px; height: 20px;" alt="image flèche haut" >
        <div class="erreurDpe"  fxLayoutAlign="left center" >
          {{message}}
        </div>
        </div>

  </div> 
  </div>
  </div>
<br>

<!-----------------------------------------------------------------------------------------------------------------------
  //////////////////////////////////////////////Formulaire DPE //////////////////////////////////////////////////////////
------------------------------------------------------------------------------------------------------------------------>
  <div [class.DpeAdem]="elemenDPE == false">
  <div  [hidden]="!depExist"  >  <!-- cas de la rénovation-->

    
  <div class="DPE-Bloc" [ngStyle]="{'border-bottom': !elemenDPE ? '1px solid #d1d3fc' : ''}"> <!--Bloc titre-->
  <img  *ngIf="hiddenDPE==false" src="../../../assets/icons/arrow-up.svg"  alt="image flèche haut"  (click)="hideDataDPE()" /> 
   &nbsp; <img *ngIf="hiddenDPE==true" src="../../../assets/icons/arrow-down.svg"  alt="image flèche haut" (click)="showDataDPE()"/> 
   &nbsp;
   <h3 class="TitreDpe">Données du DPE</h3>
  </div>
   <div *ngIf="elemenDPE == true">
   <div>
   <form class= "DpeFormulaire"  [formGroup]="formGroup"   > 
    <div>
      <label for="numeroNomRue" class="champs">Adresse du bien </label>
      <input matInput id="numeroNomRue" placeholder="Adresse" formControlName="numeroNomRue" name="numeroNomRue" class="InputCommunDpeAdresseRue"> 
      <div  class ="listeAdress" *ngIf="showAdressResults==true">
        <ul >
          <li *ngFor="let result of addressResults">
            <button (click)="selectAddress(result)">
              {{ result.properties.label }}
            </button>
          </li>
        </ul>
      </div>
    </div>
    <div>
      <input matInput id="codePostal" placeholder="Code postal" formControlName="codePostal" name="codePostal" class="InputCommunDpeAdresseCodePostal">
      <input matInput id="ville" placeholder="Ville" formControlName="ville" name="ville" class="InputCommunDpeAdresseVille">
    </div>  

    <div [hidden]="hideField==true" >
      <label for="dateDiangnostique" class="champs" >Date du diagnostic </label>
      <input matInput id="dateDiangnostique" formControlName="dateDiangnostique"  name="dateDiangnostique"class="InputCommunDpe">
    </div>
 
    <div >
      <label for="anneeConstruction" class="champs" >Année de construction
        <span class="required">*</span>
      </label>
      <input matInput id="anneeConstruction"  
      formControlName="anneeConstruction" name="anneeConstruction" class="InputCommunDpe" required
      value="">
    </div>

    <div [hidden]="hideField==true" >
      <label for="TypeBatiment" class="champs">Type de bien  </label>
      <input matInput id="TypeBatiment" formControlName="typeBatiment" type='text' name="TypeBatiment" class="InputCommunDpe">
    </div>

    <div [hidden]="hideField==true">
      <label for="LettreCEP" class="champs">Lettre CEP <span class="required">*</span></label>
      <input matInput type="text" id="LettreCEP" formControlName="lettreCEP" name="LettreCEP" class="InputCommunDpe" >
    </div> 


    <div [hidden]="hideField==false" >
      <label class="champs" >Lettre CEP
      <span class="required">*</span></label>
      <select id="LettreCEPlist" name="LettreCEPlist" formControlName="lettreCEP" class="InputCommunDpe" style="width: 145px;
      height:26px; margin-right: 30px; margin-top: 20px; border-radius:0px ; border:1px solid black; font-size: 12px; border-radius: 3px; padding-bottom: 5px;" >
        <option value='option0' > </option>
        <option value='option1' >A</option>
        <option value='option2' >B </option>
        <option value='option3' >C </option>
        <option value='option4' >D</option>
        <option value='option5' >E</option>
        <option value='option6' >F </option>
        <option value='option7' >G</option> 
      </select>   
    </div> 
 
    <div>
      <label for="ValeurCEP" class="champs">Valeur CEP <em>(en kWhep/m².an)</em>     <span class="required"> *</span></label>
      <input matInput type="text" id="ValeurCEP"  name="ValeurCEP" formControlName="valeurCEP"  class="InputCommunDpe">
    </div>
 
    <div >
      &nbsp;<label for="SurfaceDuBien" class="champs">Surface habitable <em>(en m²) </em><span class="required"> *</span></label>
      <input matInput type="text" id="SurfaceDuBien" formControlName="surfaceBien" name="SurfaceDuBien" class="InputCommunDpe"  >
    </div>
    
 
     <div [hidden]="hideField==true">
      <label for="LettreGES" class="champs">Lettre GES <span class="required">*</span></label>
      <input matInput type="text" id="LettreGES" formControlName="lettreGES" name="LettreGES"  class="InputCommunDpe">
    </div> 

    <div [hidden]="hideField==false"  >
      <label class="champs" >Lettre GES
      <span class="required">*</span></label>
      <select id="lettreGeslist" name="lettreGeslist"  formControlName="lettreGES" class="InputCommunDpe" style="width: 145px;
      height:26px; margin-right: 30px; margin-top: 20px; border-radius:0px ; border:1px solid black;  font-size: 12px;border-radius: 3px; padding-bottom: 5px;" >
        <option value='option0' > </option>
        <option value='option1' >A</option>
        <option value='option2' >B </option>
        <option value='option3' >C </option>
        <option value='option4' >D</option>
        <option value='option5' >E</option>
        <option value='option6' >F </option>
        <option value='option7' >G</option> 
      </select>   
    </div> 
 
    <div class="espace ">
      <label for="ValeurGES" class="champs"> Valeur GES <em>(en kWhep/m².an)</em>     <span class="required"> *</span></label>
      <input matInput type="text" id="ValeurGES" formControlName="valeurGES"  name="ValeurGES"  class="InputCommunDpe" >
      <img  *ngIf="valGesObligatoire==true" src="../../../assets/icons/obligatoire.svg" style="width:15px; height: 15px;" alt="image flèche haut" >
    </div>

    <div class="espace "[hidden]="hideField==true">
      <label for="EnergieType" class="champs"> Type d'énergie<span class="required"> *</span></label>
      <input matInput type="text" id="EnergieType" formControlName="EnergieType"  name="EnergieType"  class="InputCommunDpe" >
      <img  *ngIf="valGesObligatoire==true" src="../../../assets/icons/obligatoire.svg" style="width:15px; height: 15px;" alt="image flèche haut" >
    </div>


  </form>
</div>
</div>
</div>
<br>




</div>
</div>
</div>
</div>
</div>
</div>
<!-------------------------------------------------------------------------------------------------------------------------------------
  ///////////////////////////////////////////////////bloc Justificatifs////////////////////////////////////////////////////////////////
--------------------------------------------------------------------------------------------------------------------------------------->
<div class="container" > 
<div class="justificatifs">

  <div class="blocJust">
  <img  *ngIf="hiddenJustificatif==false" src="../../../assets/icons/arrow-up.svg"  (click)="hideDataJustificatif()" class="haut"  /> 
   &nbsp; <img *ngIf="hiddenJustificatif==true" src="../../../assets/icons/arrow-down.svg" class="bas"  (click)="showDataJustificatif() "/> &nbsp;
  <h3 class="TitleJustificatif"> Justificatifs</h3>
  </div >

  <div *ngFor="let justif of justifs">
  <div *ngIf="elementJustificatif == true && renovation==true && showJustif"><!--showJustif== le justificatif est disponible déja en GED-->
      <div class='justificatif' *ngIf="dpe; else blocVide"   >
      <span  class="piece-type">{{justif.typePiece}}  </span>
      <span  class='piece-numero'>{{justif.referenceGed}}</span>
      </div>
    </div>
  </div>

    <div *ngIf=" elementJustificatif == true && referenceGEDContext">
      <img  src="../../../assets/icons/coche.png" style="width:15px; height: 15px; margin-left:20px ;  margin-right: -30px;" >
      <span  class="piece-type">{{typePieceContext}}  </span>  
      <span  class="piece-numero">{{referenceGEDContext}}  </span>   
    </div>
   
<div *ngIf="elementJustificatif == true" > <!--elementJustificatif==afficher ou non la partie justificatifs -->
<div class="Parcourir" *ngIf="showJustif==false" ><!-- showJustif== le justificatif est non disponible en GED-->

  <!--demander le justificatif attestant la date de depot de permis de costruire  -->
    <div *ngIf="dateDepot" class="file-upload">
      <p >Document attestant de la date de  dépôt du permis de construire </p>
      
      <div class="Choix-Justificatif" [ngClass]="{ 'disabled': isFieldsDisabled }" >
      </div>
      <input type="text" id="dateDepot" class="file-input" [(ngModel)]="dateDepotFileName" readonly [disabled]="isFieldsDisabled">
      <button class="browse-btn" (click)="selectFile('dateDepot')">Parcourir...</button>
      <input type="file" id="dateDepotFile" style="display: none" (change)="updateFileName('dateDepot', $event)">
    </div>

   
  <!--demander le DPE ou le compromis de vente si le numéro DPE est saisi-->
  <div *ngIf="numeroDpeAdeme" class="file-upload">
    <div class="Choix-Justificatif" [ngClass]="{ 'disabled': isFieldsDisabled }" >
      <select class="form-list" id="Justificatif" required [(ngModel)]="Justificatif" name="Justificatif" [disabled]="isFieldsDisabled">
        <option value='option1'  > DPE </option>
        <option value='option2'> Compromis de vente  </option>
      </select>
    </div>
    <input type="text" id="dpe" class="file-input" [(ngModel)]="dpeFileName" readonly [disabled]="isFieldsDisabled">
    <button class="browse-btn" (click)="selectFile('dpe')" [disabled]="isFieldsDisabled" >Parcourir...</button>
    <input type="file" id="dpeFile" style="display: none" (change)="updateFileName('dpe', $event)" [disabled]="isFieldsDisabled">
</div>


<!--demander la norme thermique si elle est renseignée -->
<div *ngIf="normeThermique && normeThermique!== 'option0' &&  !dateDepot"  class="file-upload"> 
  <p >Document attestant de la Norme thermique </p>
   <div class="Choix-Justificatif" [ngClass]="{ 'disabled': isFieldsDisabled }" >
  </div>
  <input type="text" id="Normethermique" class="file-input" [(ngModel)]="NormethermiqueFileName" readonly [disabled]="isFieldsDisabled">
  <button class="browse-btn" (click)="selectFile('Normethermique')">Parcourir...</button>
  <input type="file" id="NormethermiqueFile" style="display: none" (change)="updateFileName('Normethermique', $event)">
</div>

</div>
</div>
</div>
</div>

<!---------------------------Bloc Résultats------------------------------------------------------------------------------------->
<div class="container">

  <div  class="blocResults">
    <img  *ngIf="hiddenResults==false" src="../../../assets/icons/arrow-up.svg"  (click)="hideDataResults()"   /> 
     &nbsp; <img *ngIf="hiddenResults==true" src="../../../assets/icons/arrow-down.svg" (click)="showDataResults()"/>  &nbsp;
    <h3 class="TitleJustificatif"> Résultats</h3>
  </div >
<div class ="globalResult" *ngIf="elementResults==true" >
  <div class="result">
   <div class="resultGlobal">

   <div *ngIf="selectedType !== 'option1'" class="erreurMessageResultat">
   <p>Financement non éligible à la Taxonomie</p>
  </div>
  
    <div class="containerResullt">
    <div class="colonne1">
    <div [hidden]="!isDisplay" class='textblock' >
      <div class="ResultatVert">
      &nbsp; <img  *ngIf="isDisplay==true" src="../../../assets/icons/coche.png" style="width:15px; height: 15px;" >
      Eligible et {{alignementResultText}}</div>
    </div>
    </div>


    <div class="colonne2">
    <div [hidden]="dpeIsPresent" class='textblock'>
      <div *ngIf="errorDpeMessage" class="error-message">
      &nbsp; <img  *ngIf="dpeIsPresent==false" src="../../../assets/icons/alert.svg" class="imageErreur"  >
      {{ errorDpeMessage }} 
    </div> 


    <div *ngIf="errorNormeThermiqueMessage" class="error-message">
      &nbsp; <img  *ngIf="dpeIsPresent==false" src="../../../assets/icons/alert.svg" class="imageErreur"  >
      {{ errorNormeThermiqueMessage }} 
    </div>


    <div *ngIf="errorDateDepotMessage" class="error-message">
      &nbsp; <img  *ngIf="dpeIsPresent==false" src="../../../assets/icons/alert.svg" class="imageErreur"  >
      {{errorDateDepotMessage}}
    </div>
    </div>

  </div> 
  <div class="colonne3">
    <div [hidden]="!champObligatoire" class='alertbloc'>
      &nbsp; <img  *ngIf="donneeObligatoire" src="../../../assets/icons/alert.svg" class="imageErreur">
      &nbsp;  &nbsp; {{donneeObligatoire}}
     </div>
     </div>
    </div>
    </div>
    </div>
    </div>
    </div>
<!---------------------------bloc buttons----------------------------------------------------------->
<div class="container" >
  
  <div class=footer>
  <div class="ButtonsFooter" style="display: flex; justify-content: flex-end">
  <!-- <button  class="precedent" routerLink="/generale" >Précédent</button>
   &nbsp;    -->
 <button (click)="showAlignement()"   mat-raised-button color="primary" [disabled]="selectedType!='option1'">Calculer</button>
   &nbsp; 
 <button  mat-raised-button color="primary" routerLink="/CPPE" (click)="postContinuer()" >Continuer</button>
</div>
</div>
</div>





