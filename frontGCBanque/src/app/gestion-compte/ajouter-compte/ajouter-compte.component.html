import java.lang.reflect.Field;

public Financement patchFinancementChamps(String idFinancement, Financement financementToUpdate) {
    Financement existingFinancement = financementRepository.findById(idFinancement);
    
    if (existingFinancement == null) {
        // Gérer le cas où l'objet à mettre à jour n'existe pas
        return null;
    }
    
    // Parcourir les champs de l'objet à mettre à jour
    for (Field field : Financement.class.getDeclaredFields()) {
        field.setAccessible(true);
        try {
            // Récupérer la valeur du champ dans l'objet à mettre à jour
            Object updatedValue = field.get(financementToUpdate);
            // Si le champ n'est pas null dans l'objet à mettre à jour, le mettre à jour dans l'objet existant
            if (updatedValue != null) {
                field.set(existingFinancement, updatedValue);
            }
        } catch (IllegalAccessException e) {
            // Gérer l'exception si l'accès au champ est interdit
            e.printStackTrace();
        }
    }
    
    // Enregistrer les modifications dans la base de données
    return financementRepository.save(existingFinancement);
}
